<!DOCTYPE html>
<html lang="it">
<head>
  <!-- Imposta la codifica UTF-8 per supportare caratteri speciali (accenti, simboli, ecc.) -->
  <meta charset="UTF-8" />

  <!-- Viewport responsive: rende la pagina leggibile su mobile e tablet -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Titolo della pagina (compare nel tab del browser) -->
  <title>Pagina AQI – Versione Professionale (v6.8 STABILE)</title>

  <style>
    /* =========================
       VARIABILI CSS GLOBALI
       ========================= */
    :root{
      /* Colore di sfondo generale */
      --bg:#eef6ee;

      /* Colore base delle card */
      --card:#ffffff;

      /* Colore primario (titoli) */
      --primary:#0b3c5d;

      /* Colore testo secondario */
      --muted:#6b7280;

      /* Ombra standard delle card */
      --shadow:0 6px 18px rgba(0,0,0,.08);

      /* Raggio standard degli angoli */
      --radius:12px
    }

    /* Imposta box-sizing globale per evitare problemi di layout */
    *{box-sizing:border-box}

    /* Stile base del body */
    body{
      margin:0;
      font-family:"Segoe UI",Roboto,Arial,sans-serif;
      background:var(--bg);
      color:#111827
    }

    /* =========================
       HEADER
       ========================= */
    header{
      padding:20px 28px 10px;
      display:flex;
      justify-content:space-between;
      flex-wrap:wrap;
      gap:16px;
      align-items:flex-start
    }

    /* Allineamento del blocco titolo */
    header > div:first-child{text-align:left}

    /* Spinge i filtri a destra */
    header .filters{margin-left:auto}

    header h1{
      margin:0;
      font-size:1.7rem;
      color:var(--primary)
    }

    header p{
      margin:6px 0 0;
      font-size:.9rem;
      color:var(--muted)
    }

    /* =========================
       FILTRI DATA / STANDARD
       ========================= */
    .filters{
      display:flex;
      align-items:flex-end;
      gap:10px;
      background:var(--card);
      padding:12px 14px;
      border-radius:var(--radius);
      box-shadow:var(--shadow)
    }

    .filters label{
      font-size:.7rem;
      color:var(--muted)
    }

    .filters input,
    .filters select{
      padding:7px 10px;
      border-radius:8px;
      border:1px solid #d1d5db;
      font-size:.8rem
    }

    .filters button{
      padding:8px 14px;
      border-radius:10px;
      background:#dc2626;
      color:#fff;
      border:none;
      font-weight:600;
      cursor:pointer
    }

    /* =========================
       CONTENUTO PRINCIPALE
       ========================= */
    main{
      padding:0 28px 40px;
      max-width:1200px;
      margin:0 auto
    }

    /* =========================
       KPI SECTION
       ========================= */
    .kpi-section{
      border:1px solid #d1d5db;
      border-radius:12px;
      padding:12px;
      margin-bottom:26px
    }

    .kpi-title{
      margin:0 0 10px;
      font-size:1.1rem;
      color:var(--primary)
    }

    /* Griglia 7 colonne per le KPI */
    .kpi-row{
      display:grid;
      grid-template-columns:repeat(7,1fr);
      gap:14px
    }

    /* Singola card KPI */
    .kpi{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:14px 10px;
      text-align:center;
      aspect-ratio:1/1;
      display:flex;
      flex-direction:column;
      justify-content:center
    }

    .kpi .title{
      font-size:.95rem;
      font-weight:700;
      color:#374151
    }

    .kpi .sensor{
      font-size:.72rem;
      color:var(--muted)
    }

    .kpi .value{
      margin-top:8px;
      font-size:1.15rem;
      font-weight:700
    }

    /* Badge AQI colorato */
    .aqi-badge{
      margin-top:6px;
      display:inline-block;
      padding:4px 10px;
      border-radius:999px;
      font-size:.7rem;
      color:#fff;
      font-weight:700
    }

    /* =========================
       LAYOUT GRAFICI
       ========================= */
    .layout{
      display:grid;
      grid-template-columns:320px 1fr;
      gap:20px
    }

    /* Layout mobile */
    @media(max-width:900px){
      .layout{grid-template-columns:1fr}
    }

    /* Pannello controllo grafici */
    .panel{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:16px;
      font-size:.8rem;
      width:320px;
      aspect-ratio:1/1;
      display:flex;
      flex-direction:column;
      gap:8px
    }

    @media(max-width:900px){
      .panel{width:100%}
    }

    .panel h3{
      margin:0 0 6px;
      font-size:1rem;
      color:var(--primary)
    }

    /* Contenitore dei grafici */
    .charts-wrapper{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:16px
    }

    /* Griglia 2x3 dei grafici */
    .charts{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:20px
    }

    @media(max-width:900px){
      .charts{grid-template-columns:1fr}
    }

    /* Singolo grafico */
    .chart{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:10px
    }

    .chart-title{
      font-weight:700;
      font-size:.85rem
    }

    .chart-sensor{
      font-size:.7rem;
      color:var(--muted);
      margin-left:6px
    }

    /* Iframe ThingSpeak */
    iframe{
      width:100%;
      height:220px;
      border:0;
      border-radius:8px
    }

    footer{
      text-align:center;
      margin-top:30px;
      font-size:.75rem;
      color:var(--muted)
    }
  </style>
</head>

<!-- =========================
     BODY
     ========================= -->
<body>

<!-- HEADER CON TITOLO E FILTRI -->
<header>
  <div>
    <h1>Air Quality Index Device — AQI_01</h1>
    <!-- Qui viene aggiornato dinamicamente l'intervallo date -->
    <p id="subtitle">Inizio rilevamento dati: — | Fine: —</p>
  </div>

  <!-- Filtri temporali e standard AQI -->
  <div class="filters">
    <label>Inizio</label><input type="date" id="start">
    <label>Fine</label><input type="date" id="end">
    <label>Standard</label>

    <!-- Scelta standard AQI -->
    <select id="mode">
      <option value="EEA" selected>EEA (UE)</option>
      <option value="EPA">EPA (USA)</option>
    </select>

    <!-- Pulsante aggiornamento -->
    <button id="update">Aggiorna</button>
  </div>
</header>

<!-- CONTENUTO PRINCIPALE -->
<main>

































